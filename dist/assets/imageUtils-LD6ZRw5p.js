import{decode as r}from"https://esm.sh/blurhash@2.0.5";const n=(e,s)=>{if(!e||!s)return;const c=32,t=32;try{const a=r(s,c,t);e.width=c,e.height=t;const o=e.getContext("2d"),i=o.createImageData(c,t);i.data.set(a),o.putImageData(i,0,0)}catch(a){console.error("BlurHash decode error:",a)}},l=(e,s)=>{e.classList.remove("opacity-0"),s&&setTimeout(()=>{s.style.opacity="0"},500)},m=(e,s,c)=>{const t=document.getElementById(e);if(!t)return;if(t.src=s,!c){t.classList.remove("opacity-0");return}t.classList.add("opacity-0","transition-opacity","duration-700","z-10","relative");const a=t.parentElement;if(a){getComputedStyle(a).position==="static"&&a.classList.add("relative"),a.classList.add("overflow-hidden");let o=a.querySelector(`#canvas-${e}`);o||(o=document.createElement("canvas"),o.id=`canvas-${e}`,o.className="absolute inset-0 w-full h-full object-cover z-0",a.insertBefore(o,t)),n(o,c);const i=()=>l(t,o);t.complete&&t.naturalHeight!==0?i():t.onload=i}};export{m as a,l as h,n as r};
